<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALAGOANA | Administração</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.2.3/css/buttons.dataTables.min.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/vfs_fonts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <!-- jQuery e DataTables JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>

    <style>
        body { font-family: Arial, sans-serif; }
        .sidebar { width: 250px; height: 100vh; background: #343a40; color: white; position: fixed; padding: 20px; }
        .sidebar a { color: white; text-decoration: none; display: block; padding: 10px; }
        .sidebar a:hover { background: #495057; }
        .content { margin-left: 270px; padding: 20px; }
        .hidden { display: none; }
        .notification-icon {
            position: relative;
            cursor: pointer;
        }
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: red;
            color: white;
            font-size: 12px;
            padding: 3px 7px;
            border-radius: 50%;
        }
        .notification-list {
            max-height: 300px;
            overflow-y: auto;
        }
        .container {
                    margin-top: 30px;
                }
    </style>
</head>
<body>
    <div class="sidebar">
        <h4>Administração</h4>
        <a href="#" onclick="showPage('dashboard')">Dashboard</a>
        <a href="#" onclick="showPage('graficos')">Gráficos de Desempenho</a>
        <a href="#" onclick="showPage('notificacoes')">Notificações</a>
        <a href="#" onclick="showPage('controle')">Controle de Acesso</a>
        <a href="#" onclick="showPage('moderacao')">Moderação de Comentários</a>
        <a href="#" onclick="showPage('relatorios')">Relatórios</a>
        <a href="#" onclick="showPage('email')">Automação de E-mails</a>
        <a href="#" onclick="showPage('pagamentos')">Integração com Pagamentos</a>
        <a href="#" onclick="showPage('exportacao')">Exportação de Dados</a>
    </div>

    <div class="content">
        <div id="dashboard">
            <h2>Dashboard</h2>
            <div class="row">
                <div class="col-md-4"><div class="card bg-success text-white p-3">Cursos Cadastrados: 12</div></div>
                <div class="col-md-4"><div class="card bg-primary text-white p-3">Usuários Ativos: 250</div></div>
                <div class="col-md-4"><div class="card bg-warning text-dark p-3">Comentários Pendentes: 8</div></div>
            </div>
        </div>

        <div id="graficos" class="hidden">
            <h2>Gráficos de Desempenho</h2>
            <canvas id="desempenhoChart"></canvas>
        </div>

        <div id="notificacoes" class="hidden">
         
            
        </head>
        <body>
        
            <!-- Navbar com Ícone de Notificações -->
            <nav class="navbar navbar-dark bg-dark">
                <div class="container">
                    <a class="navbar-brand" href="#">Gerenciar</a>
                    <div class="notification-icon" onclick="toggleNotifications()">
                        <i class="fas fa-bell fa-lg text-white"></i>
                        <span class="notification-badge" id="notification-count">3</span>
                    </div>
                </div>
            </nav>
        
            <!-- Container Principal -->
            <div class="container mt-4">
                <h3>Notificações</h3>
                <button class="btn btn-sm btn-primary mb-2" onclick="markAllAsRead()">Marcar todas como lidas</button>
                <ul class="list-group notification-list" id="notification-list">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Novo usuário registrado
                        <button class="btn btn-sm btn-danger" onclick="removeNotification(this)">X</button>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Pedido #456 confirmado
                        <button class="btn btn-sm btn-danger" onclick="removeNotification(this)">X</button>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Atualização do sistema disponível
                        <button class="btn btn-sm btn-danger" onclick="removeNotification(this)">X</button>
                    </li>
                </ul>
            </div>
        
            <script>
                function toggleNotifications() {
                    document.getElementById("notification-list").classList.toggle("d-none");
                }
        
                function markAllAsRead() {
                    document.getElementById("notification-count").style.display = "none";
                }
        
                function removeNotification(element) {
                    element.parentElement.remove();
                    updateNotificationCount();
                }
        
                function updateNotificationCount() {
                    let count = document.querySelectorAll("#notification-list li").length;
                    let badge = document.getElementById("notification-count");
        
                    if (count === 0) {
                        badge.style.display = "none";
                    } else {
                        badge.innerText = count;
                    }
                }
            </script>
        
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        
        </div>

        <div id="controle" class="hidden">
            <h2>Controle de Acesso</h2>
            <p>Gerenciamento de permissões de usuários.</p>
            

    <div class="container">
        <h2 class="text-center">Painel de Controle de Acesso</h2>
        
        <!-- Botão para adicionar usuário -->
        <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#userModal">Adicionar Usuário</button>
        
        <!-- Tabela de usuários -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                    <th>Email</th>
                    <th>Função</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody id="userTable">
                <!-- Conteúdo gerado dinamicamente -->
            </tbody>
        </table>
    </div>

    <!-- Modal para adicionar/editar usuário -->
    <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalLabel">Adicionar Usuário</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                </div>
                <div class="modal-body">
                    <form id="userForm">
                        <div class="mb-3">
                            <label for="nome" class="form-label">Nome</label>
                            <input type="text" class="form-control" id="nome" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="role" class="form-label">Função</label>
                            <select class="form-select" id="role">
                                <option value="Administrador">Administrador</option>
                                <option value="Editor">Gestor</option>
                                <option value="Usuário">Editor</option>
                            </select>
                        </div>
                        <input type="hidden" id="userId">
                        <button type="submit" class="btn btn-success">Salvar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        let users = [];
        
        document.getElementById('userForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const id = document.getElementById('userId').value;
            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const role = document.getElementById('role').value;
            
            if (id) {
                users = users.map(user => user.id == id ? { id, nome, email, role } : user);
            } else {
                users.push({ id: users.length + 1, nome, email, role });
            }
            atualizarTabela();
            document.getElementById('userForm').reset();
            document.getElementById('userId').value = '';
            bootstrap.Modal.getInstance(document.getElementById('userModal')).hide();
        });
        
        function atualizarTabela() {
            const tabela = document.getElementById('userTable');
            tabela.innerHTML = '';
            users.forEach(user => {
                tabela.innerHTML += `
                    <tr>
                        <td>${user.id}</td>
                        <td>${user.nome}</td>
                        <td>${user.email}</td>
                        <td>${user.role}</td>
                        <td>
                            <button class="btn btn-warning btn-sm" onclick="editarUsuario(${user.id})">Editar</button>
                            <button class="btn btn-danger btn-sm" onclick="deletarUsuario(${user.id})">Excluir</button>
                        </td>
                    </tr>
                `;
            });
        }
        
        function editarUsuario(id) {
            const user = users.find(u => u.id == id);
            document.getElementById('userId').value = user.id;
            document.getElementById('nome').value = user.nome;
            document.getElementById('email').value = user.email;
            document.getElementById('role').value = user.role;
            new bootstrap.Modal(document.getElementById('userModal')).show();
        }
        
        function deletarUsuario(id) {
            users = users.filter(user => user.id != id);
            atualizarTabela();
        }
    </script>



        </div>

       

        <div id="relatorios" class="hidden">
            <h2>Relatórios</h2>
            <p>Gerar relatórios detalhados do sistema.</p>

                <div class="container mt-4">
                    <h2 class="text-center mb-4">📊 Relatórios do Sistema</h2>

                    <!-- Filtros -->
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <label for="dataInicio">Data Início:</label>
                            <input type="date" id="dataInicio" class="form-control">
                        </div>
                        <div class="col-md-4">
                            <label for="dataFim">Data Fim:</label>
                            <input type="date" id="dataFim" class="form-control">
                        </div>
                        <div class="col-md-4">
                            <label for="categoria">Categoria:</label>
                            <select id="categoria" class="form-control">
                                <option value="todas">Todas</option>
                                <option value="vendas">Vendas</option>
                                <option value="financeiro">Financeiro</option>
                                <option value="estoque">Estoque</option>
                            </select>
                        </div>
                    </div>

                    <!-- Gráfico -->
                    <div class="card p-3 mb-4">
                        <canvas id="relatorioChart"></canvas>
                    </div>

                    <!-- Tabela de Relatórios -->
                    <div class="card p-3">
                        <h4>📋 Tabela de Relatórios</h4>
                        <table class="table table-striped mt-3">
                            <thead class="table-dark">
                                <tr>
                                    <th>ID</th>
                                    <th>Data</th>
                                    <th>Categoria</th>
                                    <th>Descrição</th>
                                    <th>Valor</th>
                                </tr>
                            </thead>
                            <tbody id="tabelaRelatorios">
                                <tr>
                                    <td>1</td>
                                    <td>2025-03-01</td>
                                    <td>Vendas</td>
                                    <td>Venda de Produto X</td>
                                    <td>MT 500</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>2025-03-02</td>
                                    <td>Financeiro</td>
                                    <td>Recebimento de Pagamento</td>
                                    <td>MT 1200</td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- Botões de Exportação -->
                        <div class="mt-3">
                            <button class="btn btn-danger" onclick="exportarPDF()">📄 Exportar PDF</button>
                            <button class="btn btn-success" onclick="exportarExcel()">📊 Exportar Excel</button>
                        </div>
                    </div>
                </div>

                <script>
                    // Gráfico de Relatórios
                    const ctx = document.getElementById('relatorioChart').getContext('2d');
                    const myChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio'],
                            datasets: [{
                                label: 'Relatórios Financeiros (MT)',
                                data: [1500, 2000, 1700, 2200, 2500],
                                backgroundColor: 'rgba(54, 162, 235, 0.6)',
                                borderColor: 'rgba(54, 162, 235, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });

                    // Exportar para PDF
                    function exportarPDF() {
                        const docDefinition = {
                            content: [
                                { text: '📊 Relatórios do Sistema', style: 'header' },
                                {
                                    table: {
                                        headerRows: 1,
                                        widths: ['auto', '*', '*', '*', '*'],
                                        body: [
                                            ['ID', 'Data', 'Categoria', 'Descrição', 'Valor'],
                                            ['1', '2025-03-01', 'Vendas', 'Venda de Produto X', 'MT 500'],
                                            ['2', '2025-03-02', 'Financeiro', 'Recebimento de Pagamento', 'MT 1200']
                                        ]
                                    }
                                }
                            ],
                            styles: {
                                header: { fontSize: 18, bold: true, marginBottom: 10 }
                            }
                        };

                        pdfMake.createPdf(docDefinition).download('relatorios.pdf');
                    }

                    // Exportar para Excel (CSV Simples)
                    function exportarExcel() {
                        let csvContent = "data:text/csv;charset=utf-8,";
                        csvContent += "ID,Data,Categoria,Descrição,Valor\n";
                        csvContent += "1,2025-03-01,Vendas,Venda de Produto X,MT 500\n";
                        csvContent += "2,2025-03-02,Financeiro,Recebimento de Pagamento,MT 1200\n";

                        const encodedUri = encodeURI(csvContent);
                        const link = document.createElement("a");
                        link.setAttribute("href", encodedUri);
                        link.setAttribute("download", "relatorios.csv");
                        document.body.appendChild(link);
                        link.click();
                    }
                </script>


        </div>


        
        

        <div id="controle" class="hidden">
            <h2>Exportacao de dados</h2>
            <p>Gerenciamento de permissões de usuários.</p>
            

        <div id="controle" class="hidden">
            <h2>Controle de Acesso</h2>
            <p>Gerenciamento de permissões de usuários.</p>
            
        </div>    

    

            <script>
                function showPage(pageId) {
                    document.querySelectorAll('.content > div').forEach(div => div.classList.add('hidden'));
                    document.getElementById(pageId).classList.remove('hidden');
                }
                
                new Chart(document.getElementById('desempenhoChart'), {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                        datasets: [{
                            label: 'Usuários Ativos',
                            data: [200, 220, 250, 270, 300, 320],
                            borderColor: 'blue',
                            fill: false
                        }]
                    }
                });
            </script>
</body>
</html>
